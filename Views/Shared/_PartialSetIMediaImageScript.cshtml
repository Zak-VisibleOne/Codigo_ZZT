<script>
    function ShowSetImage() {
        $("#imgSetImgMedia").attr('src', '/images/small/img-2.jpg');
        $('#txtURL_SetImgMedia').val('');
        loadSetImageItem();
        $('#SetImageModal').modal('show');
    }
    function loadSetImageItem() {
        $('#hidMediaRow').val(10);
        $("#rdoLast10").prop("checked", true);
        LoadMediaSetImageListView();
    }
    function onclickInsertImageToForm() {
        var pageID = $('#hidPageID').val();
        if (window.FormData !== undefined) {
            var fileUpload = $("#FileUpload_SetImgMedia").get(0);
            var files = fileUpload.files;
            var fileData = new FormData();
            fileData.append("PageID", pageID);
            for (var i = 0; i < files.length; i++) {
                fileData.append(files[i].name, files[i]);
            }
            $.ajax({
                url: "/MediaTreeView/UploadMediaImage",
                type: "POST",
                contentType: false,
                processData: false,
                data: fileData,
                success: function (result) {
                    if (result.result == "success") {
                        $('#hidSetImageUrl').val(result.message);
                        $("#imgSetImgMedia").attr('src', result.message);
                        $('#txtURL_SetImgMedia').val(result.message);
                        setImgFromMedia();
                    }
                    else {
                        toastr.warning(result.message, "Error");
                    }
                },
                error: function (err) {
                    alert(err.statusText);
                }
            });
        } else {
            alert("FormData is not supported.");
        }
        $('#SetImageModal').modal('hide');
    }
    function onClickSetImageFormMediaGallery(mediaID) {
        var id = mediaID;
        var data = GetMediaImageUrlByMediaID(id);
        if (data.length != 0) {
            $('#hidSetImageUrl').val(data.MediaUrl_enUS);
            setImgFromMedia();
        }
        $('#SetImageModal').modal('hide');
    }
    function GetMediaImageUrlByMediaID(id) {
        var request = $.ajax({
            type: 'POST',
            dataType: 'json',
            async: false,
            beforeSend: function () {
                return true;
            },
            url: SITE_URL + '/Media/MediaByID',
            data: {
                MediaID: id
            }, success: function (data) {
            }, error: function (jqXHR, textStatus, errorThrown) {
                show_ajax_error(jqXHR, textStatus, errorThrown);
            }
        });
        var result = request.responseJSON;
        return (result.data != null) ? result.data : [];
    }
    //for show image data (filter by ContentID)
    function setImgFromMedia() {
        var activeTab = $('#ActiveTab').val();
        var contentName = $("#hidSelectContentName").val();
        var result = $('#hidSetImageUrl').val();
        if (activeTab == "Dashboard") {
            $('#img_DashboardLogo').attr('src', result);
            $('#txtURL_DashboardLogo').val(result);
        }
        else if (activeTab == "loginLogo") {
            $('#img_LoginLogoImg').attr('src', result);
            $('#txtURL_LoginLogoImg').val(result);
        }
        else if (activeTab == "memberLogo") {
            $('#imgLogo_MemberRegistration').attr('src', result);
            $('#imgTxtURL_MemberRegistration').val(result);
        }
        if (contentName == 'UserProfile') {//for set image user profile
            $("#img_UserImage").attr('src', result);
            $('#txtUser_ImageUrl').val(result);
        } else if (contentName == "Stock") {
            $("#StockImage").attr('src', result);
            $('#txtStockImageUrl').val(result);
        }
    }
    function onclickInsertImageToForm() {
        var pageID = $('#hidPageID').val();
        if (window.FormData !== undefined) {
            var fileUpload = $("#FileUpload_SetImgMedia").get(0);
            var files = fileUpload.files;
            var fileData = new FormData();
            fileData.append("PageID", pageID);
            for (var i = 0; i < files.length; i++) {
                fileData.append(files[i].name, files[i]);
            }
            $.ajax({
                url: SITE_URL + "/Media/UploadMediaFile",
                type: "POST",
                contentType: false,
                processData: false,
                data: fileData,
                success: function (result) {
                    if (result.result == "success") {
                        $('#hidSetImageUrl').val(result.message);
                        $("#imgSetImgMedia").attr('src', result.message);
                        $('#txtURL_SetImgMedia').val(result.message);
                        setImgFromMedia();
                    }
                    else {
                        toastr.warning(result.message, "Error");
                    }
                },
                error: function (err) {
                    alert(err.statusText);
                }
            });
        } else {
            alert("FormData is not supported.");
        }
        $('#SetImageModal').modal('hide');
    }
</script>